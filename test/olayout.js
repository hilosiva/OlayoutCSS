"use strict";const p=require("fs"),o=require("path"),l=require("postcss");module.exports=l.plugin("olayout",()=>(e,r)=>{const a=o.resolve(__dirname,"assets/css/olayout.css"),m=o.dirname(r.opts.from),y=f(m),h=o.join(y,"olayout.config.cjs"),n=require(h);try{const i=p.readFileSync(a,"utf8"),c=l.parse(i,{from:a});try{c.walkAtRules("media",t=>{const s=t.params.trim();n.theme.screens[s]&&(t.params=`screen and (min-width: ${n.theme.screens[s]})`)}),c.walkRules(":root",t=>{(t.parent.type!=="atrule"||t.parent.name!=="media")&&t.walkDecls(/^--/,s=>{const u=s.prop.slice(5);n.theme.layout[u]&&(s.value=String(n.theme.layout[u]))})})}catch(t){console.error(t.message)}e.prepend(c)}catch{return}});function f(e){if(e==="/"||e==="\\"||g(o.join(e,"olayout.config.cjs")))return e;const r=o.dirname(e);return f(r)}function g(e){try{return p.accessSync(e),!0}catch{return!1}}
