"use strict";const R=require("fs"),d=require("path"),q=require("postcss"),N={prefix:"ol",theme:{screens:{xxs:"375px",xs:"414px",sm:"576px",md:"768px",lg:"1024px",xl:"1280px",xxl:"1480px"},layout:{"sm-offset":"2.5vw","md-offset":"5vw","lg-offset":"10vw","xl-offset":"15vw","sm-content-width":640,"md-content-width":768,"lg-content-width":1024,"xl-content-width":1280,"xxl-content-width":1440,"sm-design-width":375,"md-design-width":768,"lg-design-width":1440,space:8},colors:{"base-color":"#fff","main-color":"#116ec5","accent-color":"#e4d558","light-color":"#efefef","dark-color":"#1c1c1c","border-color-1":"#dedede","border-color-2":"#303030","border-color-3":"#fafafa","text-color-1":"#101010","text-color-2":"#606060","text-color-3":"#f0f0f0"},typos:{"font-set-1":'-apple-system, BlinkMacSystemFont, "Yu Gothic", sans-serif',"font-set-2":'"Helvetica Neue", "Helvetica", "Arial", sans-serif',"font-set-3":'"Times New Roman", "YuMincho", "Yu Mincho", serif',"base-line-height":1.5,"base-feature-settings":'"pkna"',"base-letter-spacing":"0.05em"},effects:{"shadow-1":"0 0 8px rgba(0, 0, 0, 0.16)","shadow-2":"2px 4px 24px -1px rgba(0, 0, 0, 0.1)","shadow-3":"8px 16px 32px -4px rgba(0, 0, 0, 0.05)"},animations:{"scroll-behavior":"smooth",easing:"cubic-bezier(0.16, 1, 0.3, 1)",duration:"0.6s"}}};function E(e){if(e==="/"||e==="\\"||F(d.join(e,"olayout.config.cjs")))return e;const s=d.dirname(e);return E(s)}function F(e){try{return R.accessSync(e),!0}catch{return!1}}function P(e,s){if(typeof e!="object"||typeof s!="object")return s;const c=Object.keys(s);for(const o of c)o in e&&typeof e[o]=="object"&&typeof s[o]=="object"?e[o]=P(e[o],s[o]):e[o]=s[o];return e}const x=e=>`${e/16}rem`,D=(e,s=16)=>`${e/s}em`,O=(e,s,c=N.theme.layout["sm-design-width"],o=N.theme.layout["lg-design-width"])=>{const h=(s-e)/(o-c),g=s-o*h;return`clamp(${x(e)}, ${x(g)} + ${100*h}vw, ${x(s)})`},V=(e={})=>{const s=["layout","colors","typos","effects","animations"];return{postcssPlugin:"olayout",Once(c,{result:o}){const h=d.resolve(__dirname,"assets/css/olayout.css"),g=d.dirname(o.opts.from),A=E(g),k=d.join(A,"olayout.config.cjs"),I=F(k)?require(k):{},l=P(N,I),v=new Map;try{const y=R.readFileSync(h,"utf8"),b=q.parse(y,{from:h});try{let w=!1;if(c.walkAtRules(t=>{(t.name==="olayoutcss"||t.name==="olayout")&&(w=!0,t.remove())}),b.walkAtRules("custom-media",t=>{const n=/--ol-(\w+)/.exec(t.params);if(n){const p=n[1];if(l.theme.screens[p]){const m=`screen and (min-width: ${l.theme.screens[p]})`;t.params=`${n[0]} ${m}`,v.set(n[0],m),t.remove()}}}),w){b.walkRules(":root",n=>{(n.parent.type!=="atrule"||n.parent.name!=="media")&&n.walkDecls(/^--/,p=>{const u=p.prop.slice(l.prefix.length+3);s.forEach(m=>{l.theme[m][u]&&(p.value=String(l.theme[m][u]))})})});const t=[];c.walkAtRules(n=>{(n.name==="charset"||n.name==="import"&&n.params.includes("//")||n.name==="font-face")&&(t.push(n),n.remove())}),c.prepend(b),t.reverse().forEach(n=>{c.prepend(n)})}c.walkAtRules("media",t=>{const n=t.params.trim().replace(/[()]/g,"");v.has(n)&&(t.params=v.get(n))}),c.walkDecls(t=>{const n=/fluid\(([^)]+)\)/.exec(t.value);if(n){const[a,f,i,r]=n[1].replace(/\s/g,"").split(",").map($=>{if($==="")return;const M=parseFloat($);if(isNaN(M))throw new Error(`Invalid argument '${$}' in fluid() function.`);return M});t.value=O(a,f,i||l.theme.layout["sm-design-width"],r||l.theme.layout["lg-design-width"])}const p=/em\(([^)]+)\)/.exec(t.value);if(p){const[a,f]=p[1].replace(/\s/g,"").split(",").map(i=>{if(i==="")return;const r=parseFloat(i);if(isNaN(r))throw new Error(`Invalid argument '${i}' in em() function.`);return r});t.value=D(a,f||16)}const u=/rem\(([^)]+)\)/.exec(t.value);if(u){const a=parseFloat(u[1]);if(isNaN(a))throw new Error(`Invalid argument '${u[1]}' in rem() function.`);t.value=x(a)}const m=/vw\(([^)]+)\)/.exec(t.value);if(m){const[a,f]=m[1].replace(/\s/g,"").split(",").map(i=>{if(i==="")return;const r=parseFloat(i);if(isNaN(r))throw new Error(`Invalid argument '${i}' in vw() function.`);return r});t.value=`calc(${a} / ${f||`var(--${l.prefix}-view-point)`} * 100vw)`}const j=/vh\(([^)]+)\)/.exec(t.value);if(j){const[a,f]=j[1].replace(/\s/g,"").split(",").map(i=>{if(i==="")return;const r=parseFloat(i);if(isNaN(r))throw new Error(`Invalid argument '${i}' in vh() function.`);return r});t.value=`calc(${a} / ${f||`var(--${l.prefix}-view-point)`} * 100vh)`}})}catch(w){console.error(w.message)}}catch(y){console.error(y.message);return}}}};V.postcss=!0;module.exports=V;
