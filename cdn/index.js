"use strict";const R=require("fs"),d=require("path"),q=require("postcss"),k={prefix:"ol",theme:{screens:{xxs:"375px",xs:"414px",sm:"576px",md:"768px",lg:"1024px",xl:"1280px",xxl:"1480px"},layout:{"sm-offset":"2.5vw","md-offset":"5vw","lg-offset":"10vw","xl-offset":"15vw","sm-content-width":640,"md-content-width":768,"lg-content-width":1024,"xl-content-width":1280,"xxl-content-width":1440,"sm-design-width":375,"md-design-width":768,"lg-design-width":1440,space:8},colors:{"base-color":"#fff","main-color":"#116ec5","accent-color":"#e4d558","light-color":"#efefef","dark-color":"#1c1c1c","border-color-1":"#dedede","border-color-2":"#303030","border-color-3":"#fafafa","text-color-1":"#101010","text-color-2":"#606060","text-color-3":"#f0f0f0"},typos:{"font-set-1":'-apple-system, BlinkMacSystemFont, "Yu Gothic", sans-serif',"font-set-2":'"Helvetica Neue", "Helvetica", "Arial", sans-serif',"font-set-3":'"Times New Roman", "YuMincho", "Yu Mincho", serif',"base-line-height":1.5,"base-feature-settings":'"pkna"',"base-letter-spacing":"0.05em"},effects:{"shadow-1":"0 0 8px rgba(0, 0, 0, 0.16)","shadow-2":"2px 4px 24px -1px rgba(0, 0, 0, 0.1)","shadow-3":"8px 16px 32px -4px rgba(0, 0, 0, 0.05)"},animations:{"scroll-behavior":"smooth",easing:"cubic-bezier(0.16, 1, 0.3, 1)",duration:"0.6s"}}};function E(t){if(t==="/"||t==="\\"||F(d.join(t,"olayout.config.cjs")))return t;const s=d.dirname(t);return E(s)}function F(t){try{return R.accessSync(t),!0}catch{return!1}}function P(t,s){if(typeof t!="object"||typeof s!="object")return s;const a=Object.keys(s);for(const o of a)o in t&&typeof t[o]=="object"&&typeof s[o]=="object"?t[o]=P(t[o],s[o]):t[o]=s[o];return t}const x=t=>`${t/16}rem`,D=(t,s=16)=>`${t/s}em`,O=(t,s,a=k.theme.layout["sm-design-width"],o=k.theme.layout["lg-design-width"])=>{const h=(s-t)/(o-a),g=s-o*h;return`clamp(${x(t)}, ${x(g)} + ${100*h}vw, ${x(s)})`},V=(t={})=>{const s=["layout","colors","typos","effects","animations"];return{postcssPlugin:"olayout",Once(a,{result:o}){const h=d.resolve(__dirname,"assets/css/olayout.css"),g=d.dirname(o.opts.from),A=E(g),j=d.join(A,"olayout.config.cjs"),I=F(j)?require(j):{},p=P(k,I),v=new Map;try{const y=R.readFileSync(h,"utf8"),b=q.parse(y,{from:h});try{let w=!1;if(a.walkAtRules(e=>{(e.name==="olayoutcss"||e.name==="olayout")&&(w=!0,e.remove())}),b.walkAtRules("custom-media",e=>{const n=/--ol-(\w+)/.exec(e.params);if(n){const c=n[1];if(p.theme.screens[c]){const u=`screen and (min-width: ${p.theme.screens[c]})`;e.params=`${n[0]} ${u}`,v.set(n[0],u),e.remove()}}}),w){b.walkRules(":root",n=>{(n.parent.type!=="atrule"||n.parent.name!=="media")&&n.walkDecls(/^--/,c=>{const m=c.prop.slice(p.prefix.length+3);s.forEach(u=>{p.theme[u][m]&&(c.value=String(p.theme[u][m]))})})});const e=[];a.walkAtRules(n=>{(n.name==="charset"||n.name==="import"&&n.params.includes("//")||n.name==="font-face")&&(e.push(n),n.remove())}),a.prepend(b),e.reverse().forEach(n=>{a.prepend(n)})}a.walkAtRules("media",e=>{const n=e.params.trim().replace(/[()]/g,"");v.has(n)&&(e.params=v.get(n))}),a.walkDecls(e=>{const n=/fluid\(([^)]+)\)/.exec(e.value);if(n){const[l,f,r,i]=n[1].replace(/\s/g,"").split(",").map(N=>{if(N==="")return;const M=parseFloat(N);if(isNaN(M))throw new Error(`Invalid argument '${N}' in fluid() function.`);return M});e.value=e.value.replace(n[0],O(l,f,r||p.theme.layout["sm-design-width"],i||p.theme.layout["lg-design-width"]))}const c=/rem\(([^)]+)\)/.exec(e.value);if(c){const l=parseFloat(c[1]);if(isNaN(l))throw new Error(`Invalid argument '${c[1]}' in rem() function.`);e.value=e.value.replace(c[0],x(l))}const m=/em\(([^)]+)\)/.exec(e.value);if(m){const[l,f]=m[1].replace(/\s/g,"").split(",").map(r=>{if(r==="")return;const i=parseFloat(r);if(isNaN(i))throw new Error(`Invalid argument '${r}' in em() function.`);return i});e.value=e.value.replace(m[0],D(l,f||16))}const u=/vw\(([^)]+)\)/.exec(e.value);if(u){const[l,f]=u[1].replace(/\s/g,"").split(",").map(r=>{if(r==="")return;const i=parseFloat(r);if(isNaN(i))throw new Error(`Invalid argument '${r}' in vw() function.`);return i});e.value=e.value.replace(u[0],`calc(${l} / ${f||`var(--${p.prefix}-view-point)`} * 100vw)`)}const $=/vh\(([^)]+)\)/.exec(e.value);if($){const[l,f]=$[1].replace(/\s/g,"").split(",").map(r=>{if(r==="")return;const i=parseFloat(r);if(isNaN(i))throw new Error(`Invalid argument '${r}' in vh() function.`);return i});e.value=e.value.replace($[0],`calc(${l} / ${f||`var(--${p.prefix}-view-point)`} * 100vh)`)}})}catch(w){console.error(w.message)}}catch(y){console.error(y.message);return}}}};V.postcss=!0;module.exports=V;
